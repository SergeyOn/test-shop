import React from 'react';
import withPageData from 'components/HOC/withPageData.jsx';
import { Redirect, Link } from 'react-router-dom';
import { Button } from 'antd';
import { useLastLocation } from 'react-router-last-location';

const SingleProductPage = props => {
  const lastLocation = useLastLocation();
  const { pageData, pageLoaded, pageError } = props;

  if (pageError) return <Redirect to='/404' />
  if (!pageLoaded) return <h1>loading</h1>
  return (
    <div>
      <Button type="primary">
        <Link to={lastLocation? lastLocation.pathname+lastLocation.search : '/products/'}>back</Link>
      </Button>    
      <h1>Name: {pageData.name}</h1>
      <h2>Price: {pageData.price}$</h2>
      <img src="https://picsum.photos/500" alt={pageData.name} />
    </div>
  )
}

export default withPageData()(SingleProductPage);
